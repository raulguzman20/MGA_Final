import{p as qe,r as i,E as ue,j as s,a3 as je,A as Te}from"./index-D2WH0i0l.js";import{G as ve}from"./GenericList-CZICF8vs.js";import{D as Be}from"./DetailModal-BVuqfkLW.js";import{F as ce}from"./FormModal-BqkXggEq.js";import{S as de}from"./StatusButton-T52DgIHd.js";import"./Search-CIHESQ8V.js";import"./NavigateNext-C2-Nd8B6.js";import"./TableRow-CTBWTERd.js";import"./Stack-BupWGgAE.js";import"./Checkbox-4ec6YfyB.js";import"./Switch-qiKByfkr.js";import"./FormControlLabel-CLvj0mWI.js";import"./EventNote-C1bQThfN.js";var V={};const G=typeof process<"u"&&(V==null?void 0:V.REACT_APP_API_URL)||"http://localhost:3000",g=ue.create({baseURL:G,headers:{"Content-Type":"application/json"},timeout:1e4}),$e=async()=>{try{const L=(await g.get("/api/beneficiarios")).data,x=(await g.get("/api/usuarios_has_rol")).data;return L.filter(l=>l.clienteId===l._id||l.clienteId==="cliente").map(l=>{var w;const I=x.find($=>$._id===l.usuario_has_rolId),B=((w=I==null?void 0:I.usuarioId)==null?void 0:w.correo)||"";return{_id:l._id,id:l._id,nombre:l.nombre,apellido:l.apellido,tipo_de_documento:l.tipo_de_documento,tipoDocumento:l.tipo_de_documento,numero_de_documento:l.numero_de_documento,numeroDocumento:l.numero_de_documento,fechaNacimiento:l.fechaDeNacimiento,direccion:l.direccion,telefono:l.telefono,correo:B,estado:l.estado!==void 0?l.estado:!0}})}catch(d){return console.error("Error al buscar clientes:",d),[]}},Je=()=>{const{user:d}=qe(),[L,U]=i.useState([]),[x,A]=i.useState(null),[W,l]=i.useState(!1),[I,B]=i.useState(!1),[w,$]=i.useState(!1),[Y,J]=i.useState(!1),[E,C]=i.useState(!1),[F,Z]=i.useState(null),[q,me]=i.useState([]),[H,j]=i.useState([]),[D,P]=i.useState(""),[K,Q]=i.useState(!1),[X,ee]=i.useState(null),[c,u]=i.useState({nombre:"",apellido:"",tipo_de_documento:"",numero_de_documento:"",fechaDeNacimiento:"",direccion:"",telefono:"",correo:"",contrasena:"",clienteId:""}),[T,M]=i.useState(""),[v,f]=i.useState(""),[pe,p]=i.useState(!1),[fe,h]=i.useState(""),[oe,b]=i.useState("success");i.useEffect(()=>{N()},[]),i.useEffect(()=>{w&&(async()=>{try{Q(!0),ee(null);const o=await $e();me(o),j(o)}catch(o){console.error("Error al cargar clientes:",o),ee("Error al cargar la lista de clientes")}finally{Q(!1)}})()},[w]),i.useEffect(()=>{if(D&&D.trim()!==""){const e=q.filter(o=>{var a;return o.nombre.toLowerCase().includes(D.toLowerCase())||o.apellido.toLowerCase().includes(D.toLowerCase())||o.numero_de_documento.includes(D)||((a=o.numeroDocumento)==null?void 0:a.includes(D))});j(e)}else j(q)},[D,q]);const N=async()=>{C(!0),Z(null);try{console.log("Intentando obtener beneficiarios desde:",`${G}/api/beneficiarios`);const e=await g.get("/api/beneficiarios");console.log("Respuesta beneficiarios:",e.data);const o=e.data;let a=[];try{a=(await g.get("/api/usuarios_has_rol")).data,console.log("Respuesta usuarios_has_rol:",a)}catch(t){console.warn("No se pudieron obtener usuarios_has_rol:",t.message)}let r=o.filter(t=>t.clienteId!==t._id&&t.clienteId!=="cliente"||t.clienteId===t._id);d&&d.role==="cliente"&&(console.log("Filtrando beneficiarios para cliente:",d.id),r=r.filter(t=>t.clienteId===d.id||t.clienteId===d.documento),console.log("Beneficiarios filtrados para cliente:",r.length)),console.log("Total beneficiarios:",o.length),console.log("Beneficiarios filtrados:",r.length),console.log("Datos filtrados:",r);const n=r.map(t=>{var R;const m=a.find(z=>z._id===t.usuario_has_rolId),_=((R=m==null?void 0:m.usuarioId)==null?void 0:R.correo)||t.correo||"";return{id:t._id,nombre:t.nombre||"",apellido:t.apellido||"",tipoDocumento:t.tipo_de_documento||t.tipoDocumento||"",numeroDocumento:t.numero_de_documento||t.numeroDocumento||"",fechaNacimiento:t.fechaDeNacimiento||t.fechaNacimiento||"",direccion:t.direccion||"",telefono:t.telefono||"",correo:_,estado:t.estado!==void 0?t.estado:!0}});U(n)}catch(e){console.error("Error al obtener los beneficiarios:",e);let o="Error desconocido";e.code==="ECONNREFUSED"?o="No se puede conectar al servidor. Verifica que esté corriendo en el puerto correcto.":e.response?(o=`Error del servidor: ${e.response.status} - ${e.response.statusText}`,console.error("Detalles del error:",e.response.data)):e.request?o="Error de red. Verifica tu conexión a internet y que el servidor esté disponible.":o=e.message,Z(o),(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"||window.location.hostname==="")&&(console.log("Cargando datos de prueba..."),U([{id:"1",nombre:"Juan",apellido:"Pérez",tipoDocumento:"CC",numeroDocumento:"12345678",fechaNacimiento:"1990-01-01",direccion:"Calle 123",telefono:"3001234567",correo:"juan@example.com",estado:!0}]))}finally{C(!1)}},he=e=>{J(!0),A(e),B(!0)},be=async e=>{var a,r;if(window.confirm(`¿Está seguro de eliminar al beneficiario ${e.nombre}?`))try{C(!0),await ue.delete(`http://localhost:3000/api/beneficiarios/${e.id}`),await N(),h(`Beneficiario "${e.nombre} ${e.apellido}" eliminado exitosamente.`),b("success"),p(!0)}catch(n){console.error("Error al eliminar el beneficiario:",n);let t="Error al eliminar el beneficiario";n.response&&n.response.status===400?t="No se puede eliminar el beneficiario porque está asociado a una venta de curso o matrícula":(r=(a=n.response)==null?void 0:a.data)!=null&&r.message?t=n.response.data.message:t="Error al eliminar el beneficiario. Inténtalo de nuevo.",h(t),b("error"),p(!0)}finally{C(!1)}},ge=e=>{A(e),l(!0)},Ce=()=>{l(!1),A(null)},re=()=>{B(!1),A(null),J(!1)},_e=()=>{u({nombre:"",apellido:"",tipo_de_documento:"",numero_de_documento:"",fechaDeNacimiento:"",direccion:"",telefono:"",correo:"",contrasena:"",clienteId:""}),M(""),f(""),$(!0)},ae=()=>{$(!1),P(""),u({nombre:"",apellido:"",tipo_de_documento:"",numero_de_documento:"",fechaDeNacimiento:"",direccion:"",telefono:"",correo:"",contrasena:"",clienteId:""}),M(""),f("")},xe=()=>{if(!c.contrasena)return f("La contraseña es requerida"),!1;if(c.contrasena.length<8)return f("La contraseña debe tener al menos 8 caracteres"),!1;const e=/[A-Z]/.test(c.contrasena),o=/[a-z]/.test(c.contrasena),a=/[0-9]/.test(c.contrasena);return!e||!o||!a?(f("La contraseña debe contener al menos una letra mayúscula, una minúscula y un número"),!1):c.contrasena!==T?(f("Las contraseñas no coinciden"),!1):(f(""),!0)};i.useEffect(()=>{if(c.contrasena){if(c.contrasena.length<8){f("La contraseña debe tener al menos 8 caracteres");return}const e=/[A-Z]/.test(c.contrasena),o=/[a-z]/.test(c.contrasena),a=/[0-9]/.test(c.contrasena);if(!e||!o||!a){f("La contraseña debe contener al menos una letra mayúscula, una minúscula y un número");return}if(T&&c.contrasena!==T){f("Las contraseñas no coinciden");return}f("")}},[c.contrasena,T]);const[y,te]=i.useState({length:!1,uppercase:!1,lowercase:!1,number:!1});i.useEffect(()=>{c.contrasena?te({length:c.contrasena.length>=8,uppercase:/[A-Z]/.test(c.contrasena),lowercase:/[a-z]/.test(c.contrasena),number:/[0-9]/.test(c.contrasena)}):te({length:!1,uppercase:!1,lowercase:!1,number:!1})},[c.contrasena]);const De=e=>/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(e),ye=e=>/^[0-9]{6,10}$/.test(e),Ee=e=>{u(o=>({...o,contrasena:e})),v&&f("")},we=e=>{M(e),v&&f("")},Ne=e=>{if(!e)return 0;const o=new Date(e),a=new Date;let r=a.getFullYear()-o.getFullYear();const n=a.getMonth()-o.getMonth();return(n<0||n===0&&a.getDate()<o.getDate())&&r--,r},Re=async e=>{var o,a;try{C(!0);const r={nombre:e.nombre,apellido:e.apellido,tipo_de_documento:e.tipoDocumento,numero_de_documento:e.numeroDocumento,telefono:e.telefono,direccion:e.direccion,fechaDeNacimiento:e.fechaNacimiento,correo:e.correo,fechaRegistro:new Date().toISOString(),estado:e.estado!==void 0?e.estado:!0};Y&&x?(await g.put(`/api/beneficiarios/${x.id}`,r),h(`Beneficiario "${e.nombre} ${e.apellido}" actualizado exitosamente.`),b("success"),p(!0)):(await g.post("/api/beneficiarios",r),h(`Beneficiario "${e.nombre} ${e.apellido}" creado exitosamente.`),b("success"),p(!0)),await N(),re()}catch(r){console.error("Error al guardar el beneficiario:",r);let n="Error al guardar el beneficiario";(a=(o=r.response)==null?void 0:o.data)!=null&&a.message&&(n=r.response.data.message),h(n),b("error"),p(!0)}finally{C(!1)}},Se=async e=>{try{if(!xe()){h("Error: "+v),b("error"),p(!0);return}C(!0);const o={...c,...e};if(!/^\d{10}$/.test(o.telefono||"")){alert("El teléfono debe contener exactamente 10 dígitos numéricos.");return}const a=o.numero_de_documento.toString().replace(/\D/g,"");if(a.length<6||a.length>15){h("El número de documento debe tener entre 6 y 15 dígitos numéricos."),b("error"),p(!0),C(!1);return}console.log("Creando usuario...");const r={nombre:o.nombre,apellido:o.apellido,correo:o.correo,contrasena:o.contrasena,tipo_de_documento:o.tipo_de_documento,documento:a,telefono:o.telefono||"0000000000"},t=(await g.post("/api/usuarios",r)).data._id;console.log("Usuario creado con ID:",t),console.log("Obteniendo roles...");const m=await g.get("/api/roles");console.log("Respuesta de roles completa:",m.data);let _;if(m.data&&m.data.roles)_=m.data.roles,console.log("Usando roles desde rolesResponse.data.roles");else if(Array.isArray(m.data))_=m.data,console.log("Usando roles directamente desde rolesResponse.data");else throw console.error("Estructura de respuesta de roles inesperada:",m.data),new Error("Formato de respuesta de roles inesperado");if(!Array.isArray(_))throw console.error("La respuesta de roles no es un array:",_),new Error("Formato de respuesta de roles inesperado");console.log("Roles disponibles:",_.map(S=>({id:S._id,nombre:S.nombre})));const R=_.find(S=>S.nombre==="Beneficiario");if(!R)throw new Error('Rol "Beneficiario" no encontrado');console.log("Rol de beneficiario encontrado:",R),console.log("Creando relación usuario-rol...");const z={usuarioId:t,rolId:R._id};console.log("Datos para crear usuario_has_rol:",z);const O=await g.post("/api/usuarios_has_rol",z);if(console.log("Respuesta de usuarios_has_rol completa:",O.data),!Array.isArray(O.data))throw console.error("La respuesta de usuarios_has_rol no es un array:",O.data),new Error("Formato de respuesta de usuarios_has_rol inesperado");const k=O.data[0];if(console.log("Primera relación encontrada:",k),!k||!k._id)throw new Error("No se pudo obtener el ID de la relación usuario-rol");const ie=k._id;console.log("ID de la relación usuario-rol:",ie),console.log("Creando beneficiario...");const le={nombre:o.nombre,apellido:o.apellido,tipo_de_documento:o.tipo_de_documento,numero_de_documento:a,telefono:o.telefono,direccion:o.direccion,fechaDeNacimiento:o.fechaDeNacimiento,usuario_has_rolId:ie,clienteId:o.clienteId};console.log("Datos del beneficiario a crear:",le),await g.post("/api/beneficiarios",le);try{await g.post("/api/email/welcome",{email:o.correo,nombre:o.nombre,apellido:o.apellido,username:o.correo,password:o.contrasena}),console.log("Correo de bienvenida enviado correctamente")}catch(S){console.error("Error al enviar correo de bienvenida:",S)}u({}),M(""),f(""),P(""),await N(),ae(),h("Beneficiario creado exitosamente. Se ha enviado un correo de bienvenida."),b("success"),p(!0)}catch(o){console.error("Error al crear el beneficiario:",o),o.response?(console.error("Datos del error:",{data:o.response.data,status:o.response.status,headers:o.response.headers}),h(`Error ${o.response.status}: ${o.response.data.message||"Error al crear el beneficiario"}`),b("error"),p(!0)):o.request?(console.error("Error de solicitud:",o.request),h("No se recibió respuesta del servidor. Verifique su conexión."),b("error"),p(!0)):(console.error("Error de configuración:",o.message),console.error("Stack trace:",o.stack),h(`Error: ${o.message}`),b("error"),p(!0))}finally{C(!1)}},ne=async e=>{var o,a;try{C(!0);const r=L.find(_=>_.id===e);if(!r){console.error("Beneficiario no encontrado"),h("Beneficiario no encontrado"),b("error"),p(!0);return}const n=!r.estado,t={nombre:r.nombre,apellido:r.apellido,tipo_de_documento:r.tipoDocumento,numero_de_documento:r.numeroDocumento,telefono:r.telefono,direccion:r.direccion,fechaDeNacimiento:r.fechaNacimiento,correo:r.correo,estado:n};await g.put(`/api/beneficiarios/${e}`,t),await N();const m=n?"activado":"desactivado";h(`Beneficiario "${r.nombre} ${r.apellido}" ${m} exitosamente.`),b("success"),p(!0)}catch(r){console.error("Error al actualizar el estado del beneficiario:",r);let n="Error al actualizar el estado del beneficiario";(a=(o=r.response)==null?void 0:o.data)!=null&&a.message&&(n=r.response.data.message),h(n),b("error"),p(!0)}finally{C(!1)}},Le=[{id:"nombre",label:"Nombre"},{id:"apellido",label:"Apellido"},{id:"tipoDocumento",label:"Tipo Documento"},{id:"numeroDocumento",label:"N° Documento"},{id:"fechaNacimiento",label:"Fecha Nacimiento"},{id:"direccion",label:"Dirección"},{id:"telefono",label:"Teléfono"},{id:"estado",label:"Estado",render:(e,o)=>s.jsx(de,{active:e,onClick:()=>ne(o==null?void 0:o.id),disabled:E})}],Ae=[{id:"nombre",label:"Nombre"},{id:"apellido",label:"Apellido"},{id:"tipoDocumento",label:"Tipo de Documento"},{id:"numeroDocumento",label:"Número de Documento"},{id:"fechaNacimiento",label:"Fecha de Nacimiento",render:e=>{if(!e)return"";const o=new Date(e).toLocaleDateString("es-ES"),a=Ne(e);return`${o} (${a} años)`}},{id:"direccion",label:"Dirección"},{id:"telefono",label:"Teléfono"},{id:"correo",label:"Correo Electrónico"},{id:"estado",label:"Estado",render:(e,o)=>s.jsx(de,{active:e,onClick:()=>ne(o==null?void 0:o.id),disabled:E})}],Ie=[{id:"nombre",label:"Nombre",type:"text",required:!0},{id:"apellido",label:"Apellido",type:"text",required:!0},{id:"tipoDocumento",label:"Tipo Documento",type:"select",options:[{value:"CC",label:"Cédula de Ciudadanía (CC)"},{value:"TI",label:"Tarjeta de Identidad (TI)"},{value:"CE",label:"Cédula de Extranjería (CE)"},{value:"PA",label:"Pasaporte (PA)"},{value:"RC",label:"Registro Civil (RC)"},{value:"NIT",label:"NIT"}],required:!0},{id:"numeroDocumento",label:"N° Documento",type:"text",required:!0,maxLength:15},{id:"fechaNacimiento",label:"Fecha de Nacimiento",type:"date",required:!0},{id:"direccion",label:"Dirección",type:"text",required:!0},{id:"telefono",label:"Teléfono",type:"text",required:!0,maxLength:15},{id:"correo",label:"Correo Electrónico",type:"email",required:!0},{id:"estado",label:"Estado",type:"switch",defaultValue:!0}];if(F&&L.length===0)return s.jsxs("div",{style:{padding:"20px",textAlign:"center"},children:[s.jsx("h2",{children:"Error al cargar beneficiarios"}),s.jsx("p",{style:{color:"red",marginBottom:"20px"},children:F}),s.jsx("button",{onClick:N,style:{padding:"10px 20px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},disabled:E,children:E?"Cargando...":"Reintentar"}),s.jsxs("div",{style:{marginTop:"20px",fontSize:"14px",color:"#666"},children:[s.jsx("p",{children:"Posibles soluciones:"}),s.jsxs("ul",{style:{textAlign:"left",display:"inline-block"},children:[s.jsx("li",{children:"Verifica que el servidor backend esté corriendo"}),s.jsxs("li",{children:["Confirma que la URL de la API sea correcta: ",G]}),s.jsx("li",{children:"Revisa que las rutas /api/beneficiarios estén configuradas"})]})]})]});const se=(e,o)=>{o!=="clickaway"&&p(!1)};return s.jsxs(s.Fragment,{children:[F&&s.jsxs("div",{style:{padding:"10px",backgroundColor:"#f8d7da",color:"#721c24",border:"1px solid #f5c6cb",borderRadius:"4px",marginBottom:"20px"},children:[s.jsx("strong",{children:"Advertencia:"})," ",F,s.jsx("button",{onClick:()=>Z(null),style:{float:"right",background:"none",border:"none",fontSize:"16px",cursor:"pointer"},children:"×"})]}),s.jsx(ve,{data:L,columns:Le,onEdit:(d==null?void 0:d.role)!=="cliente"?he:void 0,onDelete:(d==null?void 0:d.role)!=="cliente"?be:void 0,onView:ge,title:(d==null?void 0:d.role)==="cliente"?"Mis Beneficiarios":"Gestión de Beneficiarios",loading:E,customActions:(d==null?void 0:d.role)!=="cliente"?[{label:"Crear Nuevo",onClick:_e,icon:"add",color:"primary"}]:[]}),s.jsx(Be,{title:`Detalle del Beneficiario: ${(x==null?void 0:x.nombre)||""}`,data:x,fields:Ae,open:W,onClose:Ce}),s.jsx(ce,{title:Y?"Editar Beneficiario":"Crear Nuevo Beneficiario",fields:Ie,initialData:x,open:I,onClose:re,onSubmit:Re,loading:E}),s.jsx(ce,{title:"Crear Beneficiario Completo",initialData:{...c,clienteSearch:D,confirmarContrasena:T},fields:[{id:"clienteSearch",label:"Buscar Cliente",type:"text",placeholder:"Buscar por nombre, apellido o documento",fullWidth:!0,helperText:`${H.length} cliente(s) encontrado(s)`,onChange:(e,o,a)=>{if(P(e),a("clienteSearch",e),!e.trim()){j([]);return}const r=e.toLowerCase(),n=q.filter(t=>t.nombre.toLowerCase().includes(r)||t.apellido.toLowerCase().includes(r)||t.numero_de_documento&&t.numero_de_documento.includes(e));if(j(n),n.length===1){const t=n[0];u(m=>({...m,clienteId:t._id,direccion:t.direccion||m.direccion})),a("clienteId",t._id),t.direccion&&a("direccion",t.direccion)}}},{id:"clienteId",label:"Nombre del Cliente",type:"select",required:!0,options:H.map(e=>({value:e._id||e.id,label:`${e.nombre} ${e.apellido} - ${e.tipo_de_documento||e.tipoDocumento} ${e.numero_de_documento||e.numeroDocumento}`})),helperText:K?"Cargando clientes...":X||(H.length===0?"No hay clientes que coincidan con la búsqueda":"Seleccione el cliente"),validation:e=>e?null:"Debe seleccionar un cliente",onChange:(e,o,a)=>{u(n=>({...n,clienteId:e})),a("clienteId",e);const r=q.find(n=>n._id===e);if(r){const n=`${r.nombre} ${r.apellido}`;P(n),a("clienteSearch",n),r.direccion&&(u(t=>({...t,direccion:r.direccion})),a("direccion",r.direccion))}}},{id:"nombre",label:"Nombre",type:"text",required:!0,validation:e=>!e||e.trim().length===0?"El nombre es requerido":null,onChange:(e,o,a)=>{u(r=>({...r,nombre:e})),a("nombre",e)}},{id:"apellido",label:"Apellido",type:"text",required:!0,validation:e=>!e||e.trim().length===0?"El apellido es requerido":null,onChange:(e,o,a)=>{u(r=>({...r,apellido:e})),a("apellido",e)}},{id:"tipo_de_documento",label:"Tipo Documento",type:"select",options:[{value:"CC",label:"Cédula de Ciudadanía (CC)"},{value:"TI",label:"Tarjeta de Identidad (TI)"},{value:"CE",label:"Cédula de Extranjería (CE)"},{value:"PA",label:"Pasaporte (PA)"},{value:"RC",label:"Registro Civil (RC)"},{value:"NIT",label:"NIT"}],required:!0,onChange:(e,o,a)=>{u(r=>({...r,tipo_de_documento:e})),a("tipo_de_documento",e)}},{id:"numero_de_documento",label:"N° Documento",type:"text",required:!0,maxLength:10,validation:e=>!e||e.trim().length===0?"El número de documento es requerido":ye(e.replace(/\D/g,""))?null:"Debe contener maximo 10 Caracteres",helperText:"maximo 10 caracteres",onChange:(e,o,a)=>{u(r=>({...r,numero_de_documento:e})),a("numero_de_documento",e)}},{id:"fechaDeNacimiento",label:"Fecha de Nacimiento",type:"date",required:!0,onChange:(e,o,a)=>{u(r=>({...r,fechaDeNacimiento:e})),a("fechaDeNacimiento",e)}},{id:"direccion",label:"Dirección",type:"text",required:!0,helperText:"Se auto-completa con la dirección del cliente seleccionado",onChange:(e,o,a)=>{u(r=>({...r,direccion:e})),a("direccion",e)}},{id:"telefono",label:"Teléfono",type:"text",required:!0,maxLength:10,onChange:(e,o,a)=>{u(r=>({...r,telefono:e})),a("telefono",e)}},{id:"correo",label:"Correo Electrónico",type:"email",required:!0,validation:e=>!e||e.trim().length===0?"El correo electrónico es requerido":De(e)?null:"Debe ser un correo electrónico válido",helperText:"Formato: usuario@dominio.com",onChange:(e,o,a)=>{u(r=>({...r,correo:e})),a("correo",e)}},{id:"contrasena",label:"Contraseña",type:"password",required:!0,maxLength:10,validation:e=>{if(!e||e.length===0)return"La contraseña es requerida";if(e.length>10)return"La contraseña no debe exceder los 10 caracteres";const o=/[A-Z]/.test(e),a=/[a-z]/.test(e),r=/[0-9]/.test(e);return!o||!a||!r?"La contraseña debe contener al menos una letra mayúscula, una minúscula y un número":null},validateOnChange:!0,helperText:e=>e.contrasena?s.jsx(s.Fragment,{children:s.jsxs("ul",{style:{margin:"4px 0",paddingLeft:"20px",listStyleType:"none"},children:[s.jsxs("li",{style:{color:y.length?"green":"inherit"},children:[y.length?"✓":"•"," maximo 10 caracteres"]}),s.jsxs("li",{style:{color:y.uppercase?"green":"inherit"},children:[y.uppercase?"✓":"•"," Al menos una mayúscula"]}),s.jsxs("li",{style:{color:y.lowercase?"green":"inherit"},children:[y.lowercase?"✓":"•"," Al menos una minúscula"]}),s.jsxs("li",{style:{color:y.number?"green":"inherit"},children:[y.number?"✓":"•"," Al menos un número"]})]})}):null,onChange:(e,o,a)=>{u(r=>({...r,contrasena:e})),a("contrasena",e),Ee(e)}},{id:"confirmarContrasena",label:"Confirmar Contraseña",type:"password",required:!0,maxLength:10,placeholder:"Confirme su contraseña",validation:(e,o)=>{if(!e||e.length===0)return"Debe confirmar la contraseña";const a=o.contrasena||"";if(a.length<8)return"La contraseña debe tener al menos 8 caracteres";const r=/[A-Z]/.test(a),n=/[a-z]/.test(a),t=/[0-9]/.test(a);return!r||!n||!t?"La contraseña debe contener al menos una letra mayúscula, una minúscula y un número":e!==a?"Las contraseñas no coinciden":null},validateOnChange:!0,error:v,helperText:e=>e.confirmarContrasena?e.confirmarContrasena&&e.contrasena===e.confirmarContrasena?s.jsx("span",{style:{color:"green"},children:"✓ Las contraseñas coinciden"}):s.jsx("span",{children:v||"Debe coincidir con la contraseña"}):null,onChange:(e,o,a)=>{a("confirmarContrasena",e),we(e)}}],open:w,onClose:ae,onSubmit:Se,loading:E||K,maxWidth:"md",submitButtonText:"Crear Beneficiario"}),s.jsx(je,{open:pe,autoHideDuration:6e3,onClose:se,anchorOrigin:{vertical:"bottom",horizontal:"right"},children:s.jsx(Te,{onClose:se,severity:oe,variant:"filled",sx:{width:"100%",...oe==="success"&&{bgcolor:"#2e7d32",color:"white","& .MuiAlert-icon":{color:"white"}}},children:fe})})]})};export{Je as default};
